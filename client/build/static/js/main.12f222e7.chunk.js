(this["webpackJsonpblogs-client"]=this["webpackJsonpblogs-client"]||[]).push([[0],{268:function(e,t,n){},390:function(e,t,n){},415:function(e,t){},436:function(e,t,n){"use strict";n.r(t);var a=n(61),r=n.n(a);n(268),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(269);var i=n(9),o=n(0),s=n(21),c=n(22),l=n(245),u="https://blog-api.kartikbhalla.dev",d={domain:"dev-gg9z0y7i.us.auth0.com",clientId:"m2QIn0r3RzS9JyfJeNwW4aP8M2SrVY1a",callbackUrl:"".concat(window.location.origin,"/callback")},h=function(){function e(t){Object(s.a)(this,e),this.accessToken=void 0,this.idToken=void 0,this.expiresAt=void 0,this.history=void 0,this.auth0=new l.a.WebAuth({domain:d.domain,clientID:d.clientId,redirectUri:d.callbackUrl,responseType:"token id_token",scope:"openid"}),this.history=t,this.login=this.login.bind(this),this.logout=this.logout.bind(this),this.handleAuthentication=this.handleAuthentication.bind(this),this.isAuthenticated=this.isAuthenticated.bind(this),this.getAccessToken=this.getAccessToken.bind(this),this.getIdToken=this.getIdToken.bind(this),this.renewSession=this.renewSession.bind(this),this.idToken=localStorage.getItem("idToken")}return Object(c.a)(e,[{key:"login",value:function(){this.auth0.authorize()}},{key:"handleAuthentication",value:function(){var e=this;this.auth0.parseHash((function(t,n){n&&n.accessToken&&n.idToken?(console.log("Access token: ",n.accessToken),console.log("id token: ",n.idToken),e.setSession(n)):t&&(e.history.replace("/"),console.log(t),alert("Error: ".concat(t.error,". Check the console for further details.")))}))}},{key:"getAccessToken",value:function(){return this.accessToken}},{key:"getIdToken",value:function(){return localStorage.getItem("idToken")}},{key:"setSession",value:function(e){var t=1e3*e.expiresIn+(new Date).getTime();localStorage.setItem("isLoggedIn","true"),localStorage.setItem("idToken",e.idToken),localStorage.setItem("expiresAt",t.toString()),this.accessToken=e.accessToken,this.idToken=e.idToken,this.expiresAt=t,this.history.replace("/")}},{key:"renewSession",value:function(){var e=this;this.auth0.checkSession({},(function(t,n){n&&n.accessToken&&n.idToken?e.setSession(n):t&&(e.logout(),console.log(t),alert("Could not get a new token (".concat(t.error,": ").concat(t.error_description,").")))}))}},{key:"logout",value:function(){this.accessToken=null,this.idToken=null,this.expiresAt=0,localStorage.removeItem("isLoggedIn"),localStorage.removeItem("idToken"),localStorage.removeItem("expiresAt"),this.auth0.logout({returnTo:window.location.origin}),this.history.replace("/")}},{key:"isAuthenticated",value:function(){var e=Number(localStorage.getItem("expiresAt"));return(new Date).getTime()<e}}]),e}(),g=n(16),p=n(454),b=n(448),j=n(2);var m=function(){return Object(j.jsx)(p.a,{active:!0,children:Object(j.jsx)(b.a,{content:"Loading"})})},O=n(250),x=n.n(O),f=n(116),v=n(27),y=n(26),k=n(117),w=n(459),C=n(451),T=n(449),I=function(e){Object(v.a)(n,e);var t=Object(y.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).onLogin=function(){e.props.auth.login()},e}return Object(c.a)(n,[{key:"render",value:function(){return Object(j.jsx)(T.a,{style:{textAlign:"center"},children:Object(j.jsx)("h1",{children:"You need to login in order to continue"})})}}]),n}(o.PureComponent),S=function(e){Object(v.a)(n,e);var t=Object(y.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){return Object(j.jsx)(T.a,{children:Object(j.jsx)("h1",{style:{textAlign:"center"},children:"Not Found"})})}}]),n}(o.PureComponent),B=n(8),N=n.n(B),A=n(15),F=n(54),L=n.n(F);function E(e){return R.apply(this,arguments)}function R(){return(R=Object(A.a)(N.a.mark((function e(t){var n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Fetching blogs"),e.next=3,L.a.get("".concat(u,"/blogs"),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)}});case 3:return n=e.sent,console.log("Blogs:",n.data),e.abrupt("return",n.data.items);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(e){return D.apply(this,arguments)}function D(){return(D=Object(A.a)(N.a.mark((function e(t){var n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Fetching my blogs"),e.next=3,L.a.get("".concat(u,"/blogs?self=true"),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)}});case 3:return n=e.sent,console.log("My Blogs:",n.data),e.abrupt("return",n.data.items);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(e,t){return U.apply(this,arguments)}function U(){return(U=Object(A.a)(N.a.mark((function e(t,n){var a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Fetching blog with id: ",n),e.next=3,L.a.get("".concat(u,"/blogs/").concat(n),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)}});case 3:return a=e.sent,console.log("Blog:",a.data),e.abrupt("return",a.data.item);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(e,t){return G.apply(this,arguments)}function G(){return(G=Object(A.a)(N.a.mark((function e(t,n){var a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Fetching my blog with id: ",n),e.next=3,L.a.get("".concat(u,"/blogs/").concat(n,"?self=true"),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)}});case 3:return a=e.sent,console.log("Blog:",a.data),e.abrupt("return",a.data.item);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(e,t){return H.apply(this,arguments)}function H(){return(H=Object(A.a)(N.a.mark((function e(t,n){var a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Deleting a blog with id: ",n),e.next=3,L.a.delete("".concat(u,"/blogs/").concat(n),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)}});case 3:return a=e.sent,console.log("Deleted Blog:",a.data),e.abrupt("return",a.data.item);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(e,t,n){return J.apply(this,arguments)}function J(){return(J=Object(A.a)(N.a.mark((function e(t,n,a){var r,i;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Creating a new blog!",n),e.next=3,L.a.post("".concat(u,"/blogs"),n,{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)}});case 3:return r=e.sent,console.log("Created Blog: ",r.data),i=r.data.item.blogImageUploadUrl,e.next=8,$(i,a);case 8:return e.abrupt("return",r.data.item);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(e,t,n){return Y.apply(this,arguments)}function Y(){return(Y=Object(A.a)(N.a.mark((function e(t,n,a){var r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Updating a blog with id:",n),e.next=3,L.a.patch("".concat(u,"/blogs/").concat(n),a,{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)}});case 3:return r=e.sent,console.log("Updated Blog: ",r.data),e.abrupt("return",r.data.item);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Q(e,t){return V.apply(this,arguments)}function V(){return(V=Object(A.a)(N.a.mark((function e(t,n){var a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Getting update image url for blogId: ",n),e.next=3,L.a.get("".concat(u,"/blogs/updateImageUrl/").concat(n),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)}});case 3:return a=e.sent,console.log("image url: ",a.data),e.abrupt("return",a.data.url);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $(e,t){return K.apply(this,arguments)}function K(){return(K=Object(A.a)(N.a.mark((function e(t,n){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.a.put(t,n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var X=n(457),Z=n(452),ee=n(458),te=n(456),ne=function(e){var t=e.blog,n=e.deleteBlog,a=e.myBlog,r=Object(g.g)();return Object(j.jsxs)(Z.a,{onClick:function(){a?r.push("/my-blogs/".concat(t.blogId)):r.push("/blogs/".concat(t.blogId))},style:{cursor:"pointer"},children:[Object(j.jsx)(Z.a.Image,{size:"small",src:"".concat(t.imageUrl,"?").concat(Date.now()),rounded:!0,className:"blog-image"}),Object(j.jsxs)(Z.a.Content,{verticalAlign:"middle",children:[Object(j.jsx)(Z.a.Header,{as:"a",style:{lineHeight:"2.5rem",fontSize:"1.8rem"},children:t.heading}),Object(j.jsx)(Z.a.Meta,{style:{lineHeight:"1.8rem",fontSize:"1.2rem"},children:t.description}),Object(j.jsxs)(Z.a.Extra,{style:{display:"flex"},children:[Object(j.jsxs)("div",{children:["By ",t.authorName]}),Object(j.jsx)("div",{children:" \u2022 "}),Object(j.jsxs)("div",{children:[t.timeToRead," min"]})]}),Object(j.jsx)(Z.a.Extra,{style:{display:"flex"},children:a&&Object(j.jsxs)("div",{children:[Object(j.jsx)(te.a,{floated:"left",onClick:function(e){e.stopPropagation(),r.push("/my-blogs/edit/".concat(t.blogId))},children:"EDIT BLOG"}),Object(j.jsx)(te.a,{floated:"left",color:"red",onClick:function(e){e.stopPropagation(),n&&n(t.blogId)},children:"DELETE BLOG"})]})})]})]})},ae=function(e){Object(v.a)(n,e);var t=Object(y.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={blogs:[],loadingBlogs:!0},e}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=Object(A.a)(N.a.mark((function e(){var t;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E(this.props.auth.getIdToken());case 3:t=e.sent,this.setState({blogs:t,loadingBlogs:!1}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),alert("Failed to fetch blogs: ".concat(e.t0.message));case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(j.jsxs)(T.a,{children:[Object(j.jsx)(X.a,{as:"h1",children:"Blogs"}),this.renderBlogs()]})}},{key:"renderBlogs",value:function(){return this.state.loadingBlogs?this.renderLoading():Object(j.jsx)(Z.a.Group,{children:this.state.blogs.map((function(e,t){return Object(j.jsx)(ne,{blog:e},t)}))})}},{key:"renderLoading",value:function(){return Object(j.jsx)(ee.a.Row,{children:Object(j.jsx)(b.a,{indeterminate:!0,active:!0,inline:"centered",children:"Loading Blogs"})})}}]),n}(o.Component),re=function(e){Object(v.a)(n,e);var t=Object(y.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={blogs:[],loadingBlogs:!0},e}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=Object(A.a)(N.a.mark((function e(){var t;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,z(this.props.auth.getIdToken());case 3:t=e.sent,this.setState({blogs:t,loadingBlogs:!1}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),alert("Failed to fetch my blogs: ".concat(e.t0.message));case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"handleDeleteBlog",value:function(){var e=Object(A.a)(N.a.mark((function e(t){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W(this.props.auth.getIdToken(),t);case 2:this.setState({blogs:this.state.blogs.filter((function(e){return e.blogId!==t}))});case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(j.jsxs)(T.a,{children:[Object(j.jsx)(X.a,{as:"h1",children:"My Blogs"}),this.renderBlogs()]})}},{key:"renderBlogs",value:function(){var e=this;return this.state.loadingBlogs?this.renderLoading():Object(j.jsx)(Z.a.Group,{children:this.state.blogs.map((function(t,n){return Object(j.jsx)(ne,{blog:t,myBlog:!0,deleteBlog:function(t){return e.handleDeleteBlog(t)}},n)}))})}},{key:"renderLoading",value:function(){return Object(j.jsx)(ee.a.Row,{children:Object(j.jsx)(b.a,{indeterminate:!0,active:!0,inline:"centered",children:"Loading Blogs"})})}}]),n}(o.Component),ie=n(89),oe=n(148),se=(n(389),n(80)),ce=n(450),le=n(455),ue=function(e){Object(v.a)(n,e);var t=Object(y.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={heading:"",description:"",authorName:"",timeToRead:NaN,error:"",success:"",loadingBlog:!0,loadingMessage:"Loading Blog!"},e.componentDidMount=Object(A.a)(N.a.mark((function t(){var n,a,r,o,s;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props.match.params,t.prev=1,t.next=4,q(e.props.auth.getIdToken(),n.blogId);case 4:return a=t.sent,t.next=7,Q(e.props.auth.getIdToken(),n.blogId);case 7:r=t.sent,o=Object(se.convertFromRaw)(a.content),s=se.EditorState.createWithContent(o),e.setState(Object(i.a)(Object(i.a)({},e.state),{},{heading:a.heading,authorName:a.authorName,description:a.description,timeToRead:a.timeToRead,editorState:s,loadingBlog:!1,updateImageUrl:r})),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(1),alert("Failed to fetch blog: ".concat(t.t0.message));case 16:case"end":return t.stop()}}),t,null,[[1,13]])}))),e.handleInputChange=function(t){return e.setState(Object(i.a)(Object(i.a)({},e.state),{},Object(ie.a)({},t.currentTarget.name,t.currentTarget.value)))},e.handleFileChange=function(t){return e.setState(Object(i.a)(Object(i.a)({},e.state),{},{imageFile:t}))},e.onEditorStateChange=function(t){e.setState({editorState:t})},e.handleSubmit=Object(A.a)(N.a.mark((function t(){var n,a,r,o,s,c,l,u;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.state,a=n.authorName,r=n.description,o=n.heading,s=n.timeToRead,c=n.editorState,l=n.imageFile,u=n.updateImageUrl,a&&r&&o&&s&&c){t.next=5;break}e.setState(Object(i.a)(Object(i.a)({},e.state),{},{error:"All fields are required"})),t.next=20;break;case 5:return t.prev=5,e.setState(Object(i.a)(Object(i.a)({},e.state),{},{loadingBlog:!0,loadingMessage:"Updating Blog!"})),t.next=9,_(e.props.auth.getIdToken(),e.props.match.params.blogId,{authorName:a,description:r,heading:o,timeToRead:s,content:Object(se.convertToRaw)(c.getCurrentContent())});case 9:if(!l){t.next=12;break}return t.next=12,$(u,l);case 12:return t.next=14,e.setState(Object(i.a)(Object(i.a)({},e.state),{},{error:"",success:"Updated blog successfully!",editorState:void 0,loadingBlog:!1,loadingMessage:""}));case 14:e.props.history.push("/my-blogs"),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(5),e.setState({error:"Network Error!",success:""});case 20:case"end":return t.stop()}}),t,null,[[5,17]])}))),e}return Object(c.a)(n,[{key:"renderLoading",value:function(){return Object(j.jsx)(ee.a.Row,{children:Object(j.jsx)(b.a,{indeterminate:!0,active:!0,inline:"centered",children:this.state.loadingMessage})})}},{key:"render",value:function(){var e,t=this,n=this.state.editorState;return this.state.loadingBlog?this.renderLoading():Object(j.jsxs)(T.a,{children:[Object(j.jsx)(X.a,{size:"large",style:{textAlign:"center",margin:"2rem 0"},children:"Edit Blog"}),Object(j.jsxs)(ce.a,{size:"large",warning:!0,children:[Object(j.jsxs)(ce.a.Field,{required:!0,children:[Object(j.jsx)("label",{children:"Heading"}),Object(j.jsx)("input",{name:"heading",value:this.state.heading,onChange:this.handleInputChange,placeholder:""})]}),Object(j.jsx)(ce.a.TextArea,{required:!0,label:"Short Description",name:"description",placeholder:"",value:this.state.description,onChange:this.handleInputChange}),Object(j.jsxs)(ce.a.Field,{required:!0,children:[Object(j.jsx)("label",{children:"Author Name"}),Object(j.jsx)("input",{value:this.state.authorName,name:"authorName",placeholder:"",onChange:this.handleInputChange})]}),Object(j.jsxs)(ce.a.Field,{required:!0,children:[Object(j.jsx)("label",{children:"Time To Read (in minutes)"}),Object(j.jsx)("input",{type:"number",value:this.state.timeToRead,name:"timeToRead",placeholder:"",onChange:this.handleInputChange})]}),Object(j.jsxs)(ce.a.Field,{children:[Object(j.jsx)("label",{children:"Image"}),Object(j.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(j.jsx)(te.a,{as:"label",style:{width:"fit-content"},htmlFor:"file",type:"button",children:"Change Image"}),Object(j.jsx)("p",{children:null===(e=this.state.imageFile)||void 0===e?void 0:e.name})]}),Object(j.jsx)("input",{type:"file",id:"file",style:{display:"none"},onChange:function(e){var n=e.currentTarget;return t.handleFileChange(n.files[0])}})]}),Object(j.jsxs)(ce.a.Field,{required:!0,children:[Object(j.jsx)("label",{children:"Write Blog"}),Object(j.jsx)(oe.Editor,{editorState:n,toolbarClassName:"toolbarClassName",wrapperClassName:"wrapperClassName",editorClassName:"editorClassName",onEditorStateChange:this.onEditorStateChange,editorStyle:{border:"1px solid #F1F1F1",minHeight:"10rem",padding:"0 1rem"}})]}),Object(j.jsx)(le.a,{warning:!0,header:this.state.error?"Error":"Success",error:!!this.state.error,success:!!this.state.success,hidden:!this.state.error&&!this.state.success,list:[this.state.error?this.state.error:this.state.success]}),Object(j.jsx)(ce.a.Button,{type:"submit",onClick:this.handleSubmit,children:"Submit"})]})]})}}]),n}(o.Component),de=function(e){Object(v.a)(n,e);var t=Object(y.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={heading:"",description:"",authorName:"",timeToRead:void 0,error:"",success:"",loading:!1},e.handleInputChange=function(t){return e.setState(Object(i.a)(Object(i.a)({},e.state),{},Object(ie.a)({},t.currentTarget.name,t.currentTarget.value)))},e.handleFileChange=function(t){return e.setState(Object(i.a)(Object(i.a)({},e.state),{},{imageFile:t}))},e.onEditorStateChange=function(t){e.setState({editorState:t})},e.handleSubmit=Object(A.a)(N.a.mark((function t(){var n,a,r,o,s,c,l;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.state,a=n.authorName,r=n.description,o=n.heading,s=n.timeToRead,c=n.editorState,l=n.imageFile,a&&r&&o&&s&&c&&l){t.next=5;break}e.setState(Object(i.a)(Object(i.a)({},e.state),{},{error:"All fields are required"})),t.next=17;break;case 5:return e.setState(Object(i.a)(Object(i.a)({},e.state),{},{loading:!0})),t.prev=6,t.next=9,P(e.props.auth.getIdToken(),{authorName:a,description:r,heading:o,timeToRead:s,content:Object(se.convertToRaw)(c.getCurrentContent())},l);case 9:return t.next=11,e.setState(Object(i.a)(Object(i.a)({},e.state),{},{heading:"",description:"",authorName:"",timeToRead:void 0,error:"",success:"Created blog successfully!",editorState:void 0,imageFile:void 0}));case 11:e.props.history.push("/my-blogs"),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(6),e.setState(Object(i.a)(Object(i.a)({},e.state),{},{error:"Network Error!",success:""}));case 17:case"end":return t.stop()}}),t,null,[[6,14]])}))),e}return Object(c.a)(n,[{key:"renderLoading",value:function(){return Object(j.jsx)(ee.a.Row,{children:Object(j.jsx)(b.a,{indeterminate:!0,active:!0,inline:"centered",children:"Creating Blog!"})})}},{key:"render",value:function(){var e,t=this,n=this.state.editorState;return this.state.loading?this.renderLoading():Object(j.jsxs)(T.a,{children:[Object(j.jsx)(X.a,{size:"large",style:{textAlign:"center",margin:"2rem 0"},children:"New Blog"}),Object(j.jsxs)(ce.a,{size:"large",warning:!0,children:[Object(j.jsxs)(ce.a.Field,{required:!0,children:[Object(j.jsx)("label",{children:"Heading"}),Object(j.jsx)("input",{name:"heading",value:this.state.heading,onChange:this.handleInputChange,placeholder:""})]}),Object(j.jsx)(ce.a.TextArea,{required:!0,label:"Short Description",name:"description",placeholder:"",value:this.state.description,onChange:this.handleInputChange}),Object(j.jsxs)(ce.a.Field,{required:!0,children:[Object(j.jsx)("label",{children:"Author Name"}),Object(j.jsx)("input",{value:this.state.authorName,name:"authorName",placeholder:"",onChange:this.handleInputChange})]}),Object(j.jsxs)(ce.a.Field,{required:!0,children:[Object(j.jsx)("label",{children:"Time To Read (in minutes)"}),Object(j.jsx)("input",{type:"number",value:this.state.timeToRead,name:"timeToRead",placeholder:"",onChange:this.handleInputChange})]}),Object(j.jsxs)(ce.a.Field,{children:[Object(j.jsx)("label",{children:"Image"}),Object(j.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(j.jsx)(te.a,{as:"label",style:{width:"fit-content"},htmlFor:"file",type:"button",children:"Upload Image"}),Object(j.jsx)("p",{children:null===(e=this.state.imageFile)||void 0===e?void 0:e.name})]}),Object(j.jsx)("input",{type:"file",id:"file",style:{display:"none"},onChange:function(e){var n=e.currentTarget;return t.handleFileChange(n.files[0])}})]}),Object(j.jsxs)(ce.a.Field,{required:!0,children:[Object(j.jsx)("label",{children:"Write Blog"}),Object(j.jsx)(oe.Editor,{editorState:n,toolbarClassName:"toolbarClassName",wrapperClassName:"wrapperClassName",editorClassName:"editorClassName",onEditorStateChange:this.onEditorStateChange,editorStyle:{border:"1px solid #F1F1F1",minHeight:"10rem",padding:"0 1rem"}})]}),Object(j.jsx)(le.a,{warning:!0,header:this.state.error?"Error":"Success",error:!!this.state.error,success:!!this.state.success,hidden:!this.state.error&&!this.state.success,list:[this.state.error?this.state.error:this.state.success]}),Object(j.jsx)(ce.a.Button,{type:"submit",onClick:this.handleSubmit,children:"Submit"})]})]})}}]),n}(o.Component),he=(n(390),n(251)),ge=n(248),pe=n.n(ge),be=n(249),je=n.n(be),me=function(e){Object(v.a)(n,e);var t=Object(y.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={loadingBlog:!0},e}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=Object(A.a)(N.a.mark((function e(){var t,n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props.match.params,e.prev=1,!this.props.userBlog){e.next=8;break}return e.next=5,q(this.props.auth.getIdToken(),t.blogId);case 5:n=e.sent,e.next=11;break;case 8:return e.next=10,M(this.props.auth.getIdToken(),t.blogId);case 10:n=e.sent;case 11:this.setState({blog:n,loadingBlog:!1}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),alert("Failed to fetch blog: ".concat(e.t0.message));case 17:case"end":return e.stop()}}),e,this,[[1,14]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(j.jsxs)(T.a,{children:[" ",this.renderBlog()]})}},{key:"handleDeleteBlog",value:function(){var e=Object(A.a)(N.a.mark((function e(t){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,W(this.props.auth.getIdToken(),t);case 3:this.props.history.push("/my-blogs"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,this,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()},{key:"renderBlog",value:function(){var e=this;if(this.state.loadingBlog)return this.renderLoading();var t=this.state.blog,n=new Date(t.updatedAt).toLocaleString(void 0,{timeStyle:"short",dateStyle:"full"});return Object(j.jsxs)(T.a,{style:{marginTop:"4rem"},children:[Object(j.jsx)(X.a,{size:"huge",children:null===t||void 0===t?void 0:t.heading}),Object(j.jsx)(X.a,{size:"medium",style:{fontWeight:500,marginTop:0,marginBottom:"0.5rem"},children:null===t||void 0===t?void 0:t.description}),Object(j.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",margin:"1rem 0"},children:[Object(j.jsxs)("span",{children:["By ",null===t||void 0===t?void 0:t.authorName]}),Object(j.jsx)("span",{style:{padding:"0 0.5rem"},children:"\u2022"}),Object(j.jsxs)("span",{children:[null===t||void 0===t?void 0:t.timeToRead," min read"]}),Object(j.jsx)("span",{style:{padding:"0 0.5rem"},children:"\u2022"}),Object(j.jsxs)("span",{children:["Updated ",n]})]}),this.props.userBlog&&Object(j.jsxs)("div",{style:{margin:"1rem 0"},children:[Object(j.jsx)(te.a,{onClick:function(n){n.stopPropagation(),e.props.history.push("/my-blogs/edit/".concat(t.blogId))},children:"EDIT BLOG"}),Object(j.jsx)(te.a,{color:"red",onClick:function(){var n=Object(A.a)(N.a.mark((function n(a){return N.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a.stopPropagation(),n.next=3,e.handleDeleteBlog(t.blogId);case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),children:"DELETE BLOG"})]}),Object(j.jsx)(he.a,{src:null===t||void 0===t?void 0:t.imageUrl,size:"large",fluid:!0,centered:!0,className:"blog-view-image",style:{width:"100% ",objectFit:"cover",height:"40rem",marginBottom:"2rem"}}),Object(j.jsx)(j.Fragment,{children:pe()(je()(t.content))})]})}},{key:"renderLoading",value:function(){return Object(j.jsx)(ee.a.Row,{children:Object(j.jsx)(b.a,{indeterminate:!0,active:!0,inline:"centered",children:"Loading Blog"})})}}]),n}(o.Component),Oe=function(e){Object(v.a)(n,e);var t=Object(y.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).handleLogin=a.handleLogin.bind(Object(f.a)(a)),a.handleLogout=a.handleLogout.bind(Object(f.a)(a)),a}return Object(c.a)(n,[{key:"handleLogin",value:function(){this.props.auth.login()}},{key:"handleLogout",value:function(){this.props.auth.logout()}},{key:"render",value:function(){return Object(j.jsx)("div",{children:Object(j.jsxs)(g.c,{history:this.props.history,children:[this.generateMenu(),this.generateCurrentPage()]})})}},{key:"generateMenu",value:function(){return Object(j.jsx)(w.a,{inverted:!0,style:{borderRadius:0},children:Object(j.jsxs)(C.a,{inverted:!0,secondary:!0,children:[Object(j.jsx)(k.a,{to:"/",exact:!0,activeClassName:"active",className:"item",children:"HOME"}),!this.props.auth.isAuthenticated()&&Object(j.jsx)(C.a.Menu,{position:"right",children:Object(j.jsx)(C.a.Item,{name:"SIGN IN",onClick:this.handleLogin})}),this.props.auth.isAuthenticated()&&Object(j.jsxs)(C.a.Menu,{position:"right",children:[Object(j.jsx)(k.a,{to:"/blogs/new",activeClassName:"active",className:"item",children:"NEW BLOG"}),Object(j.jsx)(k.a,{to:"/my-blogs",activeClassName:"active",className:"item",children:"MY BLOGS"}),Object(j.jsx)(C.a.Item,{name:"SIGN OUT",onClick:this.handleLogout})]})]})})}},{key:"logInLogOutButton",value:function(){return this.props.auth.isAuthenticated()?Object(j.jsx)(C.a.Item,{name:"logout",onClick:this.handleLogout,children:"Log Out"}):Object(j.jsx)(C.a.Item,{name:"login",onClick:this.handleLogin,children:"Log In"})}},{key:"generateCurrentPage",value:function(){var e=this;return this.props.auth.isAuthenticated()?Object(j.jsx)(T.a,{style:{paddingBottom:"2rem"},children:Object(j.jsxs)(g.d,{children:[Object(j.jsx)(g.b,{path:"/blogs/new",exact:!0,render:function(t){return Object(j.jsx)(de,Object(i.a)(Object(i.a)({},t),{},{auth:e.props.auth}))}}),Object(j.jsx)(g.b,{path:"/my-blogs/edit/:blogId",exact:!0,render:function(t){return Object(j.jsx)(ue,Object(i.a)(Object(i.a)({},t),{},{auth:e.props.auth}))}}),Object(j.jsx)(g.b,{path:"/my-blogs/:blogId",exact:!0,render:function(t){return Object(j.jsx)(me,Object(i.a)(Object(i.a)({},t),{},{auth:e.props.auth,userBlog:!0}))}}),Object(j.jsx)(g.b,{path:"/my-blogs",exact:!0,render:function(t){return Object(j.jsx)(re,Object(i.a)(Object(i.a)({},t),{},{auth:e.props.auth}))}}),Object(j.jsx)(g.b,{path:"/blogs/:blogId",exact:!0,render:function(t){return Object(j.jsx)(me,Object(i.a)(Object(i.a)({},t),{},{auth:e.props.auth}))}}),Object(j.jsx)(g.a,{path:"/blogs",to:"/"}),Object(j.jsx)(g.b,{path:"/",exact:!0,render:function(t){return Object(j.jsx)(ae,Object(i.a)(Object(i.a)({},t),{},{auth:e.props.auth}))}}),Object(j.jsx)(g.b,{component:S})]})}):Object(j.jsx)(I,{auth:this.props.auth})}}]),n}(o.Component),xe=x()(),fe=new h(xe);r.a.render(Object(j.jsx)(g.c,{history:xe,children:Object(j.jsxs)("div",{children:[Object(j.jsx)(g.b,{path:"/callback",render:function(e){return function(e){var t=e.location;/access_token|id_token|error/.test(t.hash)&&fe.handleAuthentication()}(e),Object(j.jsx)(m,{})}}),Object(j.jsx)(g.b,{render:function(e){return Object(j.jsx)(Oe,Object(i.a)({auth:fe},e))}})]})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[436,1,2]]]);
//# sourceMappingURL=main.12f222e7.chunk.js.map